<h2>{{titulo}}</h2>
<app-mostrar-errores [errores]="errores"></app-mostrar-errores>

<button mat-flat-button [routerLink]="rutaCrear">Crear nuevo</button>

<app-listado-generico [listado]="entities">
  <ng-container contenido>
    <table mat-table [dataSource]="entities" class="mat-elevation-z8">

      <!-- Columnas dinÃ¡micas con @for usando el getter -->
      @for (col of columnasDefinidas; track col.key) {
      <ng-container [matColumnDef]="col.key">
        <th mat-header-cell *matHeaderCellDef>{{ col.header }}</th>
        <td mat-cell *matCellDef="let elemento">{{ elemento[col.key] }}</td>
      </ng-container>
      }

      <!-- Columna Acciones (fija para todas las entidades) -->
      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef>Acciones</th>
        <td mat-cell *matCellDef="let elemento">
          <a [routerLink]="rutaEditar + '/' + elemento.id" mat-flat-button>Editar</a>
          <button mat-button color="warn" (click)="confirmarEliminacion(elemento.id)">Eliminar</button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnasAMostrar"></tr>
      <tr mat-row *matRowDef="let row; columns: columnasAMostrar"></tr>
    </table>
  </ng-container>
</app-listado-generico>